<section class="drawer" id="drawer-name" data-drawer-target>
  <div class="drawer__overlay" data-drawer-close></div>
  <div class="drawer__wrapper">
    <form action="/cart" method="post" novalidate>
      <div class="drawer__header">
        <div class="drawer__title">
          Cart
          <!--
            <i>
              <span class="cart-item-count"> {{ cart.item_count }} </span> item(s) in bag
            </i>
          -->
        </div>
        <button class="drawer__close" data-drawer-close aria-label="Close Drawer"></button>
      </div>
      <div class="drawer__content" id="cart__drawer">
        <div class="cart-item-no" {% if cart.item_count> 0 %}
          hidden
          {% endif %}
          >
          Your shopping bag is empty.
        </div>
        <div class="cart-popup" id="cart__drawer_items">

          {% for item in cart.items %}
          <div data-hulkapps-lineitem class="cart__item cartpopup-item">
            <div class="card__item-image">
              <a href="{{item.url }}" target="_blank">
                <img id="{{ item.id }}" class="article__grid-image lazyload"
                  src="{{ item.image | image_url: width: 60, height: 90  }}" data-src="{{ img_url }}"
                  data-aspectratio="{{ item.image.aspect_ratio }}" data-sizes="auto"
                  alt="{{ item.image.alt | escape }}">
              </a>
            </div>
            <div class="card__item-content">
                <h5 class="line-item__title">
                  <a href="{{item.url }}" target="_blank">
                    {{ item.product.title }}
                  </a>
                </h5>
                <span data-hulkapps-line-properties style="flex: 1 0 100%;">
                  {%- for property in item.properties -%}
                    {%- assign property_first_char = property.first | slice: 0 -%}
                    {%- if property.last != blank and property_first_char != '_' -%}
                      <p class="line-item__option-block">

                        <span class="line-item__option">{{ property.first }}: </span>
                        <span  class="line-item__value">
                          {%- if property.last contains '/uploads/' -%}
                            <a href="{{ property.last }}" class="link" target="_blank" aria-describedby="a11y-new-window-message">
                              {{ property.last | split: '/' | last }}
                            </a>
                          {%- else -%}
                            &nbsp; {{ property.last | remove: "yes" | remove: "[" | remove: "]" }}
                          {%- endif -%}
                        </span>

                    </p>
                    {%- endif -%}
                  {%- endfor -%}
                </span>
                {% for option in item.options_with_values %}
                {% if option.name != 'Title' %}
                <p class="line-item__option-block" style="flex: 1 0 100%;">
                  <span class="line-item__option">{{ option.name }} :</span>
                  <span class="line-item__value">{{ option.value }}</span>
                </p>
                {% endif %}
                {% endfor %}

                <p class="productPrice">
                  {{ item.quantity }} x
                  {% if item.variant.compare_at_price > item.variant.price %}
                  <span data-hulkapps-line-price data-key='{{item.key}}'"  >
                        <s>{{ item.variant.compare_at_price | money_with_currency }}</s>
                      </span><br>
                      <span  data-hulkapps-line-price data-key='{{item.key}}'>{{ item.variant.price | money_with_currency }}</span>
                    {% else %}
                      <span   data-hulkapps-line-price data-key='{{item.key}}'  >{{ item.variant.price | money_with_currency }}</span>
                    {% endif %}
                  </p>
                  <p class=" delete">
                    <a class="remove removeCta" aria-label="Remove {{ item.variant.title }}"
                      href="/cart/change?line={{index}}&amp;quantity=0">
                      <svg width="18" height="18">
                        <use href="#trash-mini" />
                      </svg>
                      Remove
                    </a>
                </p>
              </div>
          </div>
          {% endfor %}
        </div>
      </div>
      <div class="drawer__footer">
        <p>Shipping & taxes calculated at checkout</p>
        <br>
        <div class="cartpopup-total">
          <span>Total</span>
          {% comment %} <span class="price" id="cart__total_price"></span> {% endcomment %}
          <span class="price" data-hulkapps-cart-total class="cart__total-price"> {{ cart.total_price | money }}</span>
        </div>
        <div class="cartpopup-buttons">
          <a class="button button-outline-maroon" href="{{ routes.cart_url }}">Your Cart</a>
          <button class="button button-solid-maroon" type="submit" name="checkout">PROCEED TO CHECKOUT</button>
        </div>
      </div>
    </form>
  </div>
</section>
